import{u as _,a as k,b as V,r as m,c as U,o as u,d as n,e as s,n as c,w as E,f as v,g as S,h as b,i as d,t as f,j as q}from"./index.e515a6fe.js";import{_ as p,a as C}from"./Input.7bb78819.js";const L={class:"min-h-screen bg-vibrant-bg flex items-center justify-center px-4"},$={class:"w-full max-w-md"},B={class:"bg-white pixel-card pixel-texture-light border-vibrant-purple p-8"},j={class:"flex mb-6 border-b-3 border-gray-300"},N={key:1,class:"bg-red-900 bg-opacity-50 border border-red-500 rounded p-3 text-red-200 text-sm"},P={key:0},R={key:1},I={__name:"LoginView",setup(A){const g=_(),y=k(),l=V(),t=m(!0),e=m({username:"",email:"",password:""}),a=m({}),w=U(()=>e.value.username.trim()&&e.value.password.trim()&&e.value.password.length>=6),x=()=>(a.value={},e.value.username.trim()?e.value.username.length<3&&(a.value.username="Username must be at least 3 characters"):a.value.username="Username is required",e.value.password.trim()?e.value.password.length<6&&(a.value.password="Password must be at least 6 characters"):a.value.password="Password is required",!t.value&&e.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value.email)&&(a.value.email="Invalid email format"),Object.keys(a.value).length===0),h=async()=>{if(!x())return;l.clearError();let i;if(t.value?i=await l.login(e.value.username,e.value.password):i=await l.register(e.value.username,e.value.password,e.value.email||null),i.success){const r=y.query.redirect||"/";g.push(r)}};return(i,r)=>(u(),n("div",L,[s("div",$,[r[5]||(r[5]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-5xl font-bold text-gray-900 mb-2"},"Digeper"),s("p",{class:"text-gray-600"},"A music player that broadens your taste")],-1)),s("div",B,[s("div",j,[s("button",{class:c(["flex-1 py-3 font-semibold transition-colors",t.value?"text-vibrant-pink border-b-2 border-vibrant-pink":"text-gray-600 hover:text-gray-900"]),onClick:r[0]||(r[0]=o=>t.value=!0)}," Login ",2),s("button",{class:c(["flex-1 py-3 font-semibold transition-colors",t.value?"text-gray-600 hover:text-gray-900":"text-vibrant-pink border-b-2 border-vibrant-pink"]),onClick:r[1]||(r[1]=o=>t.value=!1)}," Register ",2)]),s("form",{onSubmit:E(h,["prevent"]),class:"space-y-4"},[v(p,{modelValue:e.value.username,"onUpdate:modelValue":r[2]||(r[2]=o=>e.value.username=o),label:"Username",placeholder:"Enter your username",required:"",error:a.value.username},null,8,["modelValue","error"]),t.value?b("",!0):(u(),S(p,{key:0,modelValue:e.value.email,"onUpdate:modelValue":r[3]||(r[3]=o=>e.value.email=o),type:"email",label:"Email (optional)",placeholder:"Enter your email",error:a.value.email},null,8,["modelValue","error"])),v(p,{modelValue:e.value.password,"onUpdate:modelValue":r[4]||(r[4]=o=>e.value.password=o),type:"password",label:"Password",placeholder:"Enter your password",required:"",error:a.value.password},null,8,["modelValue","error"]),d(l).error?(u(),n("div",N,f(d(l).error),1)):b("",!0),v(C,{type:"submit",disabled:d(l).loading||!w.value,class:"w-full"},{default:q(()=>[d(l).loading?(u(),n("span",P,"Loading...")):(u(),n("span",R,f(t.value?"Log In":"Sign Up"),1))]),_:1},8,["disabled"])],32)])])]))}};export{I as default};
